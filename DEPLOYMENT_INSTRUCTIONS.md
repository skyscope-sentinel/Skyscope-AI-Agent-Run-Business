# DEPLOYMENT_INSTRUCTIONS.md  
Skyscope Sentinel Intelligence AI – Deployment Guide  
_Last updated: 2025-07-16_

---

## Table of Contents
1. Overview  
2. Local Deployment (macOS / Linux / Windows)  
3. Docker Deployment  
4. Cloud Deployment Recipes  
   • AWS • Azure • GCP  
5. Kubernetes / Helm (Production Scale)  
6. CI/CD Pipeline Example (GitHub Actions)  
7. Production Hardening & Best Practices  
8. Backup, DR & Upgrade Strategy  
9. Troubleshooting Checklist  

---

## 1 ▪ Overview
Skyscope Sentinel Intelligence AI (SS-IAI) is a **10 000-agent autonomous business platform** designed to run equally well on a developer laptop or a multi-node Kubernetes cluster.

Deployment artefacts provided or generated by the repo:  

| Artefact | Purpose |
|----------|---------|
| `install.py` | interactive installer for bare-metal/VM installs |
| `start.sh` / `start.bat` | convenience launchers |
| `Dockerfile` (generate if absent) | container image build |
| `docker-compose.yml` (sample) | single-node orchestration with volumes |
| `helm/` chart (optional) | production k8s deployment |
| `.github/workflows/ci.yml` | CI build & push image |

---

## 2 ▪ Local Deployment

### 2.1 Prerequisites  
• Python 3.9+  
• `git` and `make` (optional)  
• 8 GB RAM (16 GB recommended for full 10 k agent swarm)  
• Windows users: enable long paths (`git config --system core.longpaths true`)

### 2.2 Steps  

```bash
# 1. Clone
git clone https://github.com/yourorg/skyscope-sentinel.git
cd skyscope-sentinel

# 2. (Optional) create & activate virtual-env
python -m venv .venv
source .venv/bin/activate            # Windows: .venv\Scripts\activate.bat

# 3. Install
python install.py                    # adds configs, downloads deps

# 4. Launch
./start.sh --no-autonomous           # first run to set wallet & verify UI
```

The web UI is at http://localhost:8501.  
Re-enable autonomous mode once wallets & limits are configured:

```bash
./start.sh                           # or python main_launcher.py
```

---

## 3 ▪ Docker Deployment

### 3.1 Build Image

```bash
docker build -t skyscope-ai:latest .
```

A minimal `Dockerfile` template (if you need to create one):

```Dockerfile
FROM python:3.11-slim

# System deps
RUN apt-get update && apt-get install -y build-essential git && rm -rf /var/lib/apt/lists/*

# Copy code
WORKDIR /app
COPY . /app

# Install Python deps
RUN pip install --no-cache-dir -r requirements.txt

# Expose Streamlit port
EXPOSE 8501

# Set envs for headless Streamlit
ENV STREAMLIT_SERVER_HEADLESS=true \
    STREAMLIT_SERVER_PORT=8501

CMD ["python", "main_launcher.py"]
```

### 3.2 Run Container

```bash
docker run -d --name skyscope \
  -p 8501:8501 \
  -v $PWD/data:/app/data \
  -v $PWD/logs:/app/logs \
  -e OPENAI_API_KEY=$OPENAI_API_KEY \
  skyscope-ai:latest
```

Persisting `data/` and `logs/` via bind-mounts preserves state across upgrades.

### 3.3 docker-compose (single-node stack)

```yaml
version: "3.9"
services:
  skyscope:
    build: .
    ports:
      - "8501:8501"
    environment:
      - OPENAI_API_KEY=${OPENAI_API_KEY}
    volumes:
      - ./data:/app/data
      - ./logs:/app/logs
    restart: unless-stopped
```

Run with `docker compose up -d`.

---

## 4 ▪ Cloud Deployment Recipes

### 4.1 AWS

1. **ECR** – push image:  
   ```bash
   aws ecr create-repository --repository-name skyscope-ai
   docker tag skyscope-ai:latest <acct>.dkr.ecr.<region>.amazonaws.com/skyscope-ai:1.0.0
   docker push <acct>.dkr.ecr.<region>.amazonaws.com/skyscope-ai:1.0.0
   ```
2. **ECS Fargate** – create task definition with CPU/RAM 2vCPU/4 GB+, mount EFS for `/app/data`.  
3. **ALB** – route port 80 ➜ target group 8501 (health-check `/healthz` optional).  
4. **Secrets Manager** – store `OPENAI_API_KEY`, inject via task env.

### 4.2 Azure

• Build & push to **Azure Container Registry (ACR)**  
• Deploy to **Azure Container Apps** or **AKS** with volume claim to Azure Files.  
• Use **Key Vault** for secrets.

### 4.3 Google Cloud

• **Artifact Registry** for image, **Cloud Run** for serverless run (auto scale 0-N).  
• Bind **Secrets Manager** secret to `OPENAI_API_KEY`.  
• Enable Cloud Run revision CPU-always-on for lower cold-start latency.

---

## 5 ▪ Kubernetes / Helm

A skeletal Helm chart lives in `helm/skyscope/`. Key values:

```yaml
replicaCount: 2
image:
  repository: yourrepo/skyscope-ai
  tag: "1.0.0"
service:
  type: ClusterIP
  port: 8501
resources:
  limits:
    cpu: "2"
    memory: "4Gi"
persistence:
  data:
    enabled: true
    size: 10Gi
```

Deploy:

```bash
helm install skyscope helm/skyscope -f values-prod.yaml
kubectl get svc skyscope
```

Use an Ingress + cert-manager for HTTPS.

---

## 6 ▪ CI/CD (GitHub Actions)

`.github/workflows/ci.yml` excerpt:

```yaml
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with: { python-version: "3.11" }
      - run: pip install -r requirements.txt
      - run: pytest -q
      - run: docker build -t ${{ github.repository }}:${{ github.sha }} .
      - run: echo "${{ secrets.DOCKER_PASSWORD }}" | docker login -u ${{ secrets.DOCKER_USERNAME }} --password-stdin
      - run: docker push ${{ secrets.DOCKER_USERNAME }}/${{ github.repository }}:${{ github.sha }}
```

Extend with deployment to your chosen cloud via `kubectl`, `helm upgrade`, or `aws ecs update-service`.

---

## 7 ▪ Production Hardening & Best Practices

| Area | Recommendation |
|------|----------------|
| **Secrets** | Never bake keys into image; use cloud secret stores or Docker secrets. |
| **TLS** | Terminate SSL at load-balancer or ingress; redirect HTTP ➜ HTTPS. |
| **Scaling** | In k8s set HPA on CPU or custom `/metrics` (agents active). |
| **Monitoring** | Export Prometheus metrics (use `/metrics` endpoint), ship logs to ELK/Loki. |
| **Back-pressure** | Limit max active agents via `MAX_PIPELINES`, `AGENTS_PER_PIPELINE` env. |
| **Resource Limits** | Define CPU & memory limits/requests; enable OOMKill alerts. |
| **Backups** | Snapshot volume with DB + `config/` daily; verify restore quarterly. |
| **Updates** | Tag image versions semver; use `helm upgrade` with `--wait`. |
| **Compliance** | Enable audit logs (`logs/`) retention ≥ 365 days; rotate weekly. |

---

## 8 ▪ Backup, Disaster Recovery & Upgrades

1. **Cold Backup (dev/laptop)**  
   ```bash
   tar czf skyscope_backup_$(date +%F).tgz data/ config/ credentials/ logs/
   ```  
2. **Volume Snapshots** – use EBS/Managed Disks snapshots nightly.  
3. **Restore** – deploy new pod / VM, untar backups to `/app/data` then start.  
4. **Zero-downtime Upgrade (k8s)** – `helm upgrade` with RollingUpdate; verify readiness; scale replicas one-by-one.

---

## 9 ▪ Troubleshooting

| Symptom | Fix |
|---------|-----|
| Container exits immediately | Run `docker logs` – check missing env or port bind |
| “Port 8501 already in use” | Adjust `STREAMLIT_SERVER_PORT` env or stop other app |
| Wallet setup not saved | Volume not writable – check bind-mount or PVC |
| High CPU | Reduce agent count or disable autonomous mode |
| `openai.error` | Verify `OPENAI_API_KEY` validity & network egress |

---

**Enjoy building with Skyscope Sentinel Intelligence AI!**  
For support ping <support@skyscope.ai> or open a GitHub Issue.
